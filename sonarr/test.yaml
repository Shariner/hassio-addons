schemaVersion: "2.0.0"

fileExistenceTests:
  - name: Sonarr.exe
    path: /app/sonarr/bin/Sonarr.exe
    shouldExist: true
    permissions: "-rw-r--r--"
    uid: 0
    gid: 0

fileContentTests:
  - name: Sonarr run
    path: /etc/s6-overlay/s6-rc.d/svc-sonarr/run
    expectedContents:
      - "s6-setuidgid abc mono --debug Sonarr.exe"
      - "-data=/data/config"
      - "-nobrowser"

commandTests:
  - name: Mono
    command: mono
    args: [--version]
    expectedOutput: ["Mono JIT compiler version 6.12."]
    exitCode: 0

metadataTest:
  exposedPorts:
    - 8989
  volumes:
    - /data
    - /media
    - /share
    - /ssl
